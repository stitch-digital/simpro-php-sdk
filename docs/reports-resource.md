# Reports Resource

The Reports resource provides access to job cost-to-complete reports in your Simpro environment. These reports are useful for tracking financial performance and operational metrics across jobs.

## Access Pattern

```php
$connector->reports(companyId: 0);
```

## Available Reports

### Job Cost To Complete - Financial

Returns financial cost-to-complete data for jobs:

```php
$report = $connector->reports(companyId: 0)->jobCostToCompleteFinancial();

foreach ($report->items() as $item) {
    echo "Job {$item->jobId}: Budget {$item->budget}, Actual {$item->actual}\n";
}
```

#### Filtering

```php
use Simpro\PhpSdk\Simpro\Query\Search;

// Filter by job ID
$report = $connector->reports(companyId: 0)->jobCostToCompleteFinancial()
    ->where('Job.ID', '=', 123)
    ->items();

// Filter by date range
$report = $connector->reports(companyId: 0)->jobCostToCompleteFinancial()
    ->search(Search::make()->column('Date')->between('2024-01-01', '2024-12-31'))
    ->items();
```

### Job Cost To Complete - Operations

Returns operational cost-to-complete data for jobs:

```php
$report = $connector->reports(companyId: 0)->jobCostToCompleteOperations();

foreach ($report->items() as $item) {
    echo "Job {$item->jobId}: Hours Budget {$item->hoursBudget}, Hours Actual {$item->hoursActual}\n";
}
```

#### Filtering

```php
use Simpro\PhpSdk\Simpro\Query\Search;

// Filter by cost center
$report = $connector->reports(companyId: 0)->jobCostToCompleteOperations()
    ->where('CostCenter.ID', '=', 456)
    ->items();
```

## Response Structures

### JobCostToCompleteFinancialListItem

| Property | Type | Description |
|----------|------|-------------|
| `jobId` | `int` | Job ID |
| `jobName` | `?string` | Job name |
| `budget` | `?float` | Budgeted amount |
| `actual` | `?float` | Actual amount spent |
| `variance` | `?float` | Difference between budget and actual |
| `percentComplete` | `?float` | Percentage of work completed |

### JobCostToCompleteOperationsListItem

| Property | Type | Description |
|----------|------|-------------|
| `jobId` | `int` | Job ID |
| `jobName` | `?string` | Job name |
| `hoursBudget` | `?float` | Budgeted hours |
| `hoursActual` | `?float` | Actual hours worked |
| `hoursVariance` | `?float` | Difference between budgeted and actual hours |

## Examples

### Get Financial Report for All Jobs

```php
$report = $connector->reports(companyId: 0)->jobCostToCompleteFinancial()->all();

$totalBudget = 0;
$totalActual = 0;

foreach ($report as $item) {
    $totalBudget += $item->budget ?? 0;
    $totalActual += $item->actual ?? 0;
}

echo "Total Budget: {$totalBudget}\n";
echo "Total Actual: {$totalActual}\n";
echo "Total Variance: " . ($totalBudget - $totalActual) . "\n";
```

### Export Report to CSV

```php
$report = $connector->reports(companyId: 0)->jobCostToCompleteFinancial()->all();

$csv = "Job ID,Job Name,Budget,Actual,Variance,% Complete\n";
foreach ($report as $item) {
    $csv .= implode(',', [
        $item->jobId,
        '"' . str_replace('"', '""', $item->jobName ?? '') . '"',
        $item->budget ?? 0,
        $item->actual ?? 0,
        $item->variance ?? 0,
        $item->percentComplete ?? 0,
    ]) . "\n";
}

file_put_contents('cost_to_complete_report.csv', $csv);
```

## Limitations

The Reports resource is **read-only**. Reports are generated by Simpro based on job data and cannot be modified through the API.
